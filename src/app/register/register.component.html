<div class="container w-75 m-4 mx-auto px-3">
  <h1 class="">Register Now:</h1>

  <div *ngIf="errorMessage" class="alert alert-info">
    {{ errorMessage }}
  </div>

  <form (ngSubmit)="handleRegister(registerForm)" [formGroup]="registerForm">
    <div class="form-group">
      <label for="name" class="form-label">Name </label>
      <input
        type="text"
        class="form-control mb-2"
        name="name"
        id="name"
        required
        minlength="4"
        aria-describedby="bob"
        placeholder="Enter your name"
        formControlName="name"
      />

      <div
        *ngIf="
          registerForm.get('name')?.errors && registerForm.get('name')?.touched
        "
        class="alert alert-danger"
      >
        <div *ngIf="registerForm.get('name')?.getError('required')">
          Name is required.
        </div>
        <div *ngIf="registerForm.get('name')?.getError('minlength')">
          Name must be at least 4 characters long.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        class="form-control mb-2"
        name="email"
        id="email"
        placeholder="abc@mail.com"
        formControlName="email"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('email')?.errors &&
          registerForm.get('email')?.touched
        "
      >
        <div *ngIf="registerForm.get('email')?.getError('required')">
          Email is required.
        </div>
        <div *ngIf="registerForm.get('email')?.getError('email')">
          Email is invalid.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="password" class="form-label">Password</label>
      <input
        type="password"
        class="form-control mb-2"
        name="password"
        id="password"
        placeholder="Enter your password"
        formControlName="password"
      />
      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('password')?.errors &&
          registerForm.get('password')?.touched
        "
      >
        <div *ngIf="registerForm.get('password')?.getError('required')">
          Password is required.
        </div>

        <div *ngIf="registerForm.get('password')?.getError('pattern')">
          Password must contain at least one number and one uppercase and
          lowercase letter
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="password_confirmation" class="form-label"
        >Confirm Password</label
      >
      <input
        type="password"
        class="form-control mb-2"
        name="password_confirmation"
        id="password_confirmation"
        placeholder="Confirm your password"
        formControlName="password_confirmation"
      />

      <div
        class="alert alert-danger"
        *ngIf="
          (registerForm.get('password_confirmation')?.errors &&
            registerForm.get('password_confirmation')?.touched) ||
          registerForm.get('password_confirmation')?.value !==
            registerForm.get('password')?.value
        "
      >
        <div
          *ngIf="
            registerForm.get('password_confirmation')?.getError('required')
          "
        >
          Password is required.
        </div>
        <div
          *ngIf="
            registerForm.get('password_confirmation')?.getError('matchPassword')
          "
        >
          Password confirmation must match password.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="phoneNumber" class="form-label">Phone Number</label>
      <input
        type="text"
        class="form-control mb-2"
        name="phoneNumber"
        id="phoneNumber"
        placeholder="Enter your phone number"
        formControlName="phoneNumber"
      />

      <div
        class="alert alert-danger"
        *ngIf="
          registerForm.get('phoneNumber')?.errors &&
          registerForm.get('phoneNumber')?.touched
        "
      >
        <div *ngIf="registerForm.get('phoneNumber')?.getError('required')">
          Phone Number is required.
        </div>
        <div *ngIf="registerForm.get('phoneNumber')?.getError('pattern')">
          Phone Number is invalid.
        </div>
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-main ms-auto d-flex gap-2 align-items-center"
      [ngClass]="isLoading ? 'btn-main-disabled' : ''"
    >
      <span
        [ngClass]="isLoading ? 'spinner-border spinner-border-sm' : 'd-none'"
      ></span>

      {{ isLoading ? "Loading..." : "Register" }}
    </button>
  </form>
</div>
